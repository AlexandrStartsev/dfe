<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="others/dfe-style.css">

    <script src="http://sevin7676.github.io/Ace.Tern/ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="/js/dfe-core.js"></script>
    <script src="/js/dfe-components.js"></script>
    <script src="/js/dfe-editor.js"></script>
    

    <script>      
       
        function __getFile(url, c) {
            var xhr = new XMLHttpRequest();
            xhr.open("get", url, true), xhr.send(), xhr.onreadystatechange = function () { xhr.readyState == 4 && c(xhr.responseText, xhr.status) }
        }
        
        var editor;
        $(document).ready(function() {
            editor = ace.edit('editor');
            editor.$blockScrolling = Infinity;
            
            document.getElementById('editor').style.fontSize = '14px';
            editor.setTheme('ace/theme/eclipse');  //dawn, eclipse, iplastic, kuroir, textmate
            editor.setShowPrintMargin(false);
      
            editor.getSession().setMode("ace/mode/javascript");
            editor.getSession().setUseSoftTabs(true);
            editor.getSession().on('change', function(e) {
                console.log('abc');
            });
            
            /* taken from http://sevin7676.github.io/Ace.Tern/demo.html#html */
            /* http://ternjs.net/doc/manual.html#option_defs */
            /* http://ternjs.net/doc/manual.html#plugins */
            ace.config.loadModule('ace/ext/tern', function () {
                editor.setOptions({
                    enableTern: {
                        defs: ['browser', 'ecma5' , 'jquery'], 
                        plugins: { 
                            doc_comment: { fullDocs: true } 
                        }, 
                        useWorker: false, 
                        startedCb: function () {
                            __getFile('/js/ui-utils.js', function(txt) { editor.ternServer.addDoc('ui-utils', txt) } );
                            __getFile('/js/dfe-core.js', function(txt) { editor.ternServer.addDoc('dfe-core', txt) } );
                            __getFile('/js/extras.js', function(txt) { editor.ternServer.addDoc('extras', txt) } );
                            editor.ternServer.addDoc('preset', '$$ = new JsonProxy(), $$.form = new DfeForm(), $$.runtime = new DfeRuntime(), get($$), set($$, value), validate($$), attr($$)');
                        },
                    },
                    enableSnippets: true,
                    enableBasicAutocompletion: true,
                });
               
            });
            
        });
   
        
    </script>
</head>
<body>
    <input/>


<div id="enclosure" style="width: 800px; height: 500px; border: 2px solid #888; border-radius: 5px; overflow: visible; position: absolute">
    <div id="editor" style="width: 100%; height: 100%">function get($$){
        $$
}</div>
</div> 
    
   
</body>
</html>